# HesabPay Environment Configuration Example

# IMPORTANT: Do NOT commit actual secrets to version control
# Use Firebase Secret Manager for sensitive values

# =============================================================================
# Required Secrets (Set via Firebase Secret Manager)
# =============================================================================

# To set secrets, use:
# firebase functions:secrets:set SECRET_NAME

# HesabPay API Key (REQUIRED)
# Get this from your HesabPay merchant dashboard
# HESABPAY_KEY=your-api-key-here

# Webhook Secret (REQUIRED)
# Used to verify webhook signatures from HesabPay
# Generate a secure random string and configure it in HesabPay dashboard
# HESABPAY_WEBHOOK_SECRET=your-webhook-secret-here

# Merchant PIN (REQUIRED for payment distribution)
# Your HesabPay merchant PIN for authorizing payment distributions
# MERCHANT_PIN=your-merchant-pin

# =============================================================================
# Configuration Parameters (Set via Firebase Config)
# =============================================================================

# To set config, use:
# firebase functions:config:set key.subkey="value"

# HesabPay Base URL (OPTIONAL - defaults to production)
# Production: https://api.hesab.com/api/v1
# Sandbox: https://sandbox-api.hesab.com/api/v1
# 
# Set with: firebase functions:config:set hesabpay.base_url="https://api.hesab.com/api/v1"

# =============================================================================
# Setting Up Secrets
# =============================================================================

# 1. Install Firebase CLI if not already installed:
#    npm install -g firebase-tools

# 2. Login to Firebase:
#    firebase login

# 3. Set secrets interactively (recommended):
#    firebase functions:secrets:set HESABPAY_KEY
#    firebase functions:secrets:set HESABPAY_WEBHOOK_SECRET
#    firebase functions:secrets:set MERCHANT_PIN

# 4. Verify secrets are set:
#    firebase functions:secrets:access HESABPAY_KEY --project your-project-id

# =============================================================================
# Sandbox vs Production
# =============================================================================

# For Development/Testing (Sandbox):
# firebase functions:config:set hesabpay.base_url="https://sandbox-api.hesab.com/api/v1"
# Use sandbox API keys and webhook secrets

# For Production:
# firebase functions:config:set hesabpay.base_url="https://api.hesab.com/api/v1"
# Use production API keys and webhook secrets

# =============================================================================
# Security Best Practices
# =============================================================================

# 1. Never commit secrets to version control
# 2. Use different keys for sandbox and production
# 3. Rotate secrets regularly
# 4. Limit API key permissions in HesabPay dashboard
# 5. Monitor webhook signature verification failures
# 6. Keep Firebase SDK and dependencies updated

# =============================================================================
# Webhook Configuration
# =============================================================================

# Configure webhook URL in HesabPay dashboard:
# URL: https://us-central1-YOUR_PROJECT_ID.cloudfunctions.net/hesabWebhook
# Method: POST
# Headers: x-hesab-signature (will be auto-added by HesabPay)
# Secret: Use the same value as HESABPAY_WEBHOOK_SECRET

# =============================================================================
# Verification
# =============================================================================

# After setting secrets and config, verify:
# 1. firebase functions:config:get
# 2. firebase functions:secrets:access HESABPAY_KEY
# 3. Deploy functions: firebase deploy --only functions
# 4. Check logs: firebase functions:log
